<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <title>Seleksi Calon Karyawan</title>
 <style>
   body {
      font-family: Arial, sans-serif;
    }
    .container {
      width: 70%;
      margin: 40px auto;
      padding: 20px;
      background-color: #f9f9f9;
      border: 10px solid #ddd;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    }
    label {
      display: block;
      margin-bottom: 10px;
    }
    input[type="number"] {
      width: 97%;
      height: 20px;
      margin-bottom: 20px;
      padding: 10px;
      border: 1px solid #ccc;
    }
    input[type="text"] {
      width: 97%;
      height: 20px;
      margin-bottom: 20px;
      padding: 10px;
      border: 1px solid #ccc;
    }
    button {
      width: 100%;
      height: 40px;
      background-color: #4CAF50;
      color: #fff;
      padding: 10px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }
    button:hover {
      background-color: #3e8e41;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 20px;
    }
    th, td {
      border: 1px solid #444;
      padding: 8px;
      text-align: center;
    }
    th {
      background-color: #eee;
    }
    tr:nth-child(even) {
      background-color: #f9f9f9;
    }
    tr:hover {
      background-color: #ddd;
    }
  </style>
  <!-- jsPDF dan plugin autotable -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.28/jspdf.plugin.autotable.min.js"></script>
</head>
<body>
  <div class="container">
    <h2>Seleksi Calon Karyawan</h2>
    <form id="form" novalidate>
      <input type="text" id="nama" placeholder="Nama Calon" required>
      <input type="number" id="umur" placeholder="Umur" required>
           <label>Jenis Kelamin:</label>
            <select id="jenis-kelamin" required>
              <option value="">Pilih Jenis Kelamin</option>
              <option value="Pria">Pria</option>
              <option value="Wanita">Wanita</option>
            </select>
            <br><br>
            <label>Pendidikan :</label>
            <select id="pendidikan" required>
              <option value="">Pilih Pendidikan</option>
              <option value="SMA">SMA</option>
              <option value="D3">D3</option>
              <option value="S1">S1</option>
              <option value="S2">S2</option>
            </select>
            <br><br>
      <input type="number" id="wawancara" placeholder="Nilai Wawancara" required>
      <input type="number" id="komputer" placeholder="Nilai Tes Komputer" required>
      <button id="hitung" type="button">Hitung & Simpan</button>
    </form>

    <h3>Hasil Seleksi</h3>
    <table id="tabelHasil">
      <thead>
        <tr>
          <th>Peringkat</th>
          <th>Nama</th>
          <th>Umur</th>
          <th>Jenis Kelamin</th>
          <th>Pendidikan</th>
          <th>Wawancara</th>
          <th>Komputer</th>
          <th>Total Skor</th>
          <th>Output</th>
          <th>Hasil Seleksi</th>
        </tr>
      </thead>
      <tbody>
        <!-- Data tampil otomatis di sini -->
      </tbody>
    </table>
<br><br>
    <button id="exportPDF" type="button">Export ke PDF</button>
  </div>

  <script>
    let dataCalon = [];

    document.getElementById("hitung").addEventListener("click", function() {
      const nama = document.getElementById("nama").value;
      const umur = document.getElementById("umur").value;
      const jenisKelamin = document.getElementById("jenis-kelamin").value;
      const pendidikan = document.getElementById("pendidikan").value;
      const wawancara = parseFloat(document.getElementById("wawancara").value);
      const komputer = parseFloat(document.getElementById("komputer").value);

      if (!nama || isNaN(wawancara) || isNaN(komputer)) {
        alert("Lengkapi semua input terlebih dahulu!");
        return;
      }

      const totalSkor = wawancara + komputer;
      const output = Math.min(100, 75 + (totalSkor - 150) / 10);
      const hasilSeleksi = output >= 75 ? "Diterima" : "Tidak Diterima";

      dataCalon.push({ nama, umur, jenisKelamin, pendidikan, wawancara, komputer, totalSkor, output, hasilSeleksi });

      // Urutkan berdasarkan output tertinggi
      dataCalon.sort((a, b) => b.output - a.output);

      // Tampilkan ke tabel
      const tbody = document.querySelector("#tabelHasil tbody");
      tbody.innerHTML = "";
      dataCalon.forEach((calon, index) => {
        const row = `
          <tr>
            <td>${index + 1}</td>
            <td>${calon.nama}</td>
            <td>${calon.umur}</td>
            <td>${calon.jenisKelamin}</td>
            <td>${calon.pendidikan}</td>
            <td>${calon.wawancara}</td>
            <td>${calon.komputer}</td>
            <td>${calon.totalSkor}</td>
            <td>${calon.output.toFixed(2)}</td>
            <td>${calon.hasilSeleksi}</td>
          </tr>
        `;
        tbody.innerHTML += row;
      });

      // Reset form
      document.getElementById("form").reset();
    });

    // Export ke PDF
    document.getElementById("exportPDF").addEventListener("click", function() {
      const { jsPDF } = window.jspdf;
      const doc = new jsPDF();

      doc.text("Hasil Seleksi Calon Karyawan", 14, 15);

      // Ambil tabel untuk diekspor
      doc.autoTable({
        startY: 20,
        html: "#tabelHasil"
      });

      doc.save("hasil_seleksi.pdf");
    });
  </script>
</body>
</html>
